<?xml version="1.0"?>

<ui:composition
        template="/rhq/layout/main.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:c="http://java.sun.com/jstl/core"
        xmlns:fn="http://java.sun.com/jsp/jstl/functions"
        xmlns:a4j="http://richfaces.org/a4j"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:rhq="http://rhq-project.org/rhq"
        xmlns:onc="http://jboss.org/on/component">
    
    <ui:param name="disableMenu" value="true"/>
    <ui:param name="disableBreadcrumbs" value="true"/>

    <ui:define name="body">

        <rich:panel>
            <f:facet name="header">
                <h:outputText value="Downloads"/>
            </f:facet>

            <h:panelGrid columns="1" width="100%">

                <h:outputLink value="/agentupdate/download">
                    <h:graphicImage value="/images/icons/Save_32.png"/>
                    <h:outputText value="Download Agent Installer"/>
                </h:outputLink>

                <h:panelGroup>
                    <span class="DisplayLabel">Agent Version: </span>
                    <h:outputText value="#{DownloadsUIBean.agentVersionProperties['rhq-agent.latest.version']}"/><br/>
                    <span class="DisplayLabel">Agent Build: </span>
                    <h:outputText value="#{DownloadsUIBean.agentVersionProperties['rhq-agent.latest.build-number']}"/><br/>
                    <span class="DisplayLabel">Agent MD5: </span>
                    <h:outputText value="#{DownloadsUIBean.agentVersionProperties['rhq-agent.latest.md5']}"/>
                </h:panelGroup>


                <h3>Agent Install</h3>

                <p>
                    <b>java -jar &lt;agent-download.jar&gt; --install[=&lt;new agent dir&gt;]</b><br/>
                    When specified, this will install a new agent
                    without attempting to update any existing
                    agent. If you do not specify the directory,
                    the default is:.
                    Note the directory will be the parent of the
                    new agent home installation directory.
                    This is mutually exclusive of --update
                </p>


                <h3>Agent Update</h3>

                <p>
                    <b>java -jar &lt;agent-download.jar&gt; --update[=&lt;old agent home&gt;]</b><br/>
                    When specified, this will update an existing
                    agent. If you do not specify the directory
                    where the existing agent is, the default is:
                    rhq-agent
                    This is mutually exclusive of --install
                </p>


                <h3>Connector Downloads</h3>
                <ui:repeat var="download" value="#{DownloadsUIBean.connectorDownloadFiles}">
                    <h:outputLink value="/downloads/connectors/#{download.name}">
                        <h:outputText value="#{download.name}"/>
                    </h:outputLink>
                    <br/>
                </ui:repeat>

            </h:panelGrid>
        </rich:panel>

        <rich:panel>
            <f:facet name="header">
                <h:outputText value="Command Line Client Download"/>
            </f:facet>

            <h:panelGrid columns="1" width="100%">

                <h:outputLink value="/client/download">
                    <h:graphicImage value="/images/icons/Save_32.png"/>
                    <h:outputText value="Download Client Installer"/>
                </h:outputLink>

                <h:panelGroup>
                    <span class="DisplayLabel">Client Version: </span> <h:outputText value="#{DownloadsUIBean.clientVersionProperties['rhq-server.version']}"/><br/>
                    <span class="DisplayLabel">Client Build: </span> <h:outputText value="#{DownloadsUIBean.clientVersionProperties['rhq-server.build-number']}"/>
                </h:panelGroup>

            </h:panelGrid>
        </rich:panel>

    </ui:define>
</ui:composition>
